model Product {
  id           String   @id @default(uuid())
  name         String
  slug         String   @unique
  description  String
  price        Decimal  @db.Decimal(10, 2)
  comparePrice Decimal? @db.Decimal(10, 2) @map("compare_price")
  sku          String   @unique
  categoryId   String   @map("category_id")
  isActive     Boolean  @default(true) @map("is_active")
  isFeatured   Boolean  @default(false) @map("is_featured")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt  @map("updated_at")


  // Relations
  category   Category        @relation(fields: [categoryId], references: [id])
  variants   ProductVariant[]
  images     ProductImage[]
  reviews    Review[]
  inventory  Inventory?
  cartItems  CartItem[]
  orderItems OrderItem[]

  @@index([slug])
  @@index([categoryId])
  @@map("products")
}

model ProductVariant {
  id        String   @id @default(uuid())
  productId String   @map("product_id")
  name      String
  sku       String   @unique
  price     Decimal  @db.Decimal(10, 2)
  stock     Int      @default(0)
  isActive  Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt  @map("updated_at")


  // Relations
  product Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@map("product_variants")
}

model ProductImage {
  id        String   @id @default(uuid())
  productId String   @map("product_id")
  url       String
  alt       String?
  position  Int      @default(0)
  createdAt DateTime @default(now()) @map("created_at")

  // Relations
  product Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@map("product_images")
}